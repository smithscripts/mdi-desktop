!function(){"use strict";var a=angular.module("mdi.desktop.menubar",[]);a.controller("mdiDesktopMenubarController",["$scope",function(a){a.openWindow=function(b,c){a.desktopCtrl.openWindow(c)}}]),a.directive("mdiDesktopMenubar",["$compile","$http","$templateCache",function(a,b,c){return{restrict:"A",replace:!0,require:"?^mdiDesktop",scope:{},controller:"mdiDesktopMenubarController",link:function(d,e,f,g){d.desktopCtrl=g,d.options=g.getOptions(),f.$observe("templateUrl",function(f){b.get(f,{cache:c}).then(function(b){var c=a(b.data)(d);e.append(c)})})}}}])}(),function(){"use strict";var a=angular.module("mdi.desktop.taskbar",[]);a.controller("mdiDesktopTaskbarController",["$scope",function(a){a.updateWindowState=function(b){return b.outOfBounds?(a.desktopCtrl.cascadeWindow(b),b.active=!0,void(b.outOfBounds=!1)):void(b.active?(b.active=!1,b.minimized=!0):(a.desktopCtrl.clearActive(),b.active=!0,b.minimized=!1,b.zIndex=a.desktopCtrl.getNextMaxZIndex()))},a.hideShowAll=function(){a.desktopCtrl.hideShowAll()},a.close=function(b,c){a.desktopCtrl.getWindows().splice(c,1),b.stopPropagation(),b.preventDefault()}}]),a.directive("mdiDesktopTaskbar",["$log",function(){return{restrict:"A",replace:!0,templateUrl:"src/templates/mdi-desktop-taskbar.html",require:"?^mdiDesktop",controller:"mdiDesktopTaskbarController",scope:{windows:"="},link:function(a,b,c,d){a.desktopCtrl=d,a.options=d.getOptions()}}}])}(),function(){"use strict";var a=angular.module("mdi.desktop.view",[]);a.directive("mdiDesktopView",["$compile","$http",function(a){return{restrict:"A",replace:!1,scope:{view:"="},link:function(b,c){if(b.view.viewDirective){var d=a("<div "+b.view.viewDirective+' view="view"></div>')(b);c.append(d)}}}}])}(),function(){"use strict";var a=angular.module("mdi.desktop.viewport",[]);a.controller("mdiDesktopViewportController",["$scope","$element","$window","$document",function(a,b,c,d){var e=this;e.getViewportDimensions=function(){return a.dimensions},e.mouseMove=function(b){a.$apply(function(){a.showLeftOutline=b.pageX<=0?!0:!1,a.showRightOutline=b.pageX>=a.dimensions.width-1?!0:!1})},e.mouseUp=function(){a.$apply(function(){a.showLeftOutline=!1,a.showRightOutline=!1}),d.unbind("mousemove",e.mouseMove),d.unbind("mouseup",e.mouseUp)},a.dimensions={},a.showLeftOutline=!1,a.showRightOutline=!1,a.viewportMouseDown=function(){d.on("mousemove",e.mouseMove),d.on("mouseup",e.mouseUp)},a.$watch(function(){return b[0].offsetWidth>0&&b[0].offsetHeight>0},function(){a.dimensions={height:b[0].clientHeight,width:b[0].clientWidth}}),angular.element(c).bind("resize",function(){a.$apply(function(){a.dimensions={height:b[0].clientHeight,width:b[0].clientWidth}})})}]),a.directive("mdiDesktopViewport",["$timeout","$window",function(){return{restrict:"A",replace:!0,templateUrl:"src/templates/mdi-desktop-viewport.html",require:"?^mdiDesktop",controller:"mdiDesktopViewportController",scope:{windows:"="},link:function(a,b,c,d){a.desktopCtrl=d,a.options=d.getOptions()}}}])}(),function(){"use strict";var a=angular.module("mdi.desktop.window",[]);a.controller("mdiDesktopWindowController",["$scope","$element","$document","$window",function(a,b,c,d){var e=this;e.top,e.left,e.right,e.bottom,e.height,e.width,e.x=0,e.y=0,e.lastX=0,e.lastY=0,e.startX=0,e.startY=0,e.titleBar=void 0,e.viewportDimensions=void 0,e.viewConfig={active:!0,entities:void 0,entityIndex:0,isDirty:!1,isInvalid:!1,viewDirective:void 0},e.storeWindowValues=function(){e.top=a.window.top,e.left=a.window.left,e.right=a.window.right,e.bottom=a.window.bottom,e.height=a.window.height,e.width=a.window.width},e.mouseMove=function(c){a.$apply(function(){return e.viewportDimensions=a.viewportCtrl.getViewportDimensions(),c.pageX<=0||c.pageX>=e.viewportDimensions.width||a.window.split?!1:(b.css({opacity:.5}),e.x=c.screenX-e.startX,e.y=c.screenY-e.startY,e.y=e.y>=0?e.y:0,e.y=e.y<=e.viewportDimensions.height-e.titleBar[0].offsetHeight?e.y:e.viewportDimensions.height-e.titleBar[0].offsetHeight,e.x=e.x>=-(e.titleBar[0].offsetWidth+e.titleBar[0].offsetLeft)?e.x:-(e.titleBar[0].offsetWidth+e.titleBar[0].offsetLeft),e.x=e.x<=e.viewportDimensions.width-e.titleBar[0].offsetLeft?e.x:e.viewportDimensions.width-e.titleBar[0].offsetLeft,a.window.top=e.y+"px",void(a.window.left=e.x+"px"))})},e.mouseUp=function(d){a.$apply(function(){d.pageX<=0&&(a.window.split=!0,a.window.top=0,a.window.left=0,a.window.bottom=0,a.window.width="50%",a.window.height="auto"),e.viewportDimensions=a.viewportCtrl.getViewportDimensions(),d.pageX>=e.viewportDimensions.width-1&&(a.window.split=!0,a.window.top=0,a.window.left="50%",a.window.right=0,a.window.bottom=0,a.window.width="50%",a.window.height="auto")}),b.css({opacity:1}),c.unbind("mousemove",e.mouseMove),c.unbind("mouseup",e.mouseUp)},e.updateNavigationState=function(){if(void 0!==a.window.views){var b=a.window.views.length;a.disablePrevious=a.window.views[0].active||1===b?!0:!1,a.disableNext=a.window.views[b-1].active||1===b?!0:!1}},e.isWindowInViewport=function(){a.$apply(function(){var c=b[0].offsetTop,d=b[0].offsetLeft;c+10>=a.viewportCtrl.getViewportDimensions().height||d+200>=a.viewportCtrl.getViewportDimensions().width?(a.window.outOfBounds=!0,a.window.active=!1):a.window.outOfBounds=!1})},e.getWindow=function(){return a.window},e.setWindowTitle=function(b){a.window.title=b},e.getActiveView=function(){var b=null;return angular.forEach(a.window.views,function(a){a.active===!0&&(b=a)}),b},e.removeForwardViews=function(){for(var b=e.getActiveView(),c=a.window.views.indexOf(b),d=a.window.views.length;d>c;d--)a.window.views.splice(d,1);e.updateNavigationState()},e.addView=function(b){e.removeForwardViews();var c=e.getActiveView();c.active=!1;var d=Object.create(e.viewConfig),f=angular.extend(d,b);a.window.views.push(f),e.updateNavigationState()},e.getGlobals=function(){return a.window.globals},angular.element(d).bind("resize",function(){e.isWindowInViewport()}),a.disablePrevious=!0,a.disableNext=!0,a.activate=function(){a.window.maximized||a.window.outOfBounds||(a.desktopCtrl.clearActive(),a.window.active=!0,a.window.zIndex=a.desktopCtrl.getNextMaxZIndex())},a.minimize=function(){a.window.active=!1,a.window.minimized=!0},a.resetWindowValues=function(){a.window.top=e.top,a.window.left=e.left,a.window.right=e.right,a.window.bottom=e.bottom,a.window.height=e.height,a.window.width=e.width},a.maximize=function(){a.window.split?(a.window.split=!1,a.resetWindowValues()):a.window.maximized?(a.resetWindowValues(),a.window.maximized=!1):(e.storeWindowValues(),a.window.top=0,a.window.left=0,a.window.right=0,a.window.bottom=0,a.window.height="100%",a.window.width="100%",a.window.maximized=!0)},a.close=function(){a.desktopCtrl.closeWindow(a.window)},a.windowTitleMouseDown=function(d){a.window.maximized||a.window.split||a.window.outOfBounds||(d.preventDefault(),e.titleBar=angular.element(d.srcElement),e.x=b[0].offsetLeft,e.y=b[0].offsetTop,e.startX=d.screenX-e.x,e.startY=d.screenY-e.y,e.storeWindowValues(),c.on("mousemove",e.mouseMove),c.on("mouseup",e.mouseUp))},a.previousView=function(){for(var b=0;b<a.window.views.length;b++){var c=a.window.views[b];if(c.active){c.active=!1,a.window.views[b-1].active=!0;break}}e.updateNavigationState()},a.nextView=function(){for(var b=0;b<a.window.views.length-1;b++){var c=a.window.views[b];if(c.active){c.active=!1,a.window.views[b+1].active=!0;break}}e.updateNavigationState()},e.updateNavigationState()}]),a.directive("mdiDesktopWindow",[function(){return{restrict:"A",replace:!0,templateUrl:"src/templates/mdi-desktop-window.html",require:["^mdiDesktop","^mdiDesktopViewport"],controller:"mdiDesktopWindowController",scope:{index:"=",window:"="},link:function(a,b,c,d){a.desktopCtrl=d[0],a.viewportCtrl=d[1],a.desktopCtrl.cascadeWindow(a.window)}}}])}(),function(){"use strict";var a=angular.module("mdi.desktop",["ngAnimate","mdi.desktop.menubar","mdi.desktop.viewport","mdi.desktop.taskbar","mdi.desktop.window","mdi.desktop.view","mdi.resizable"]);a.service("desktopClassFactory",function(){function a(){this.allowDirtyClose=!1,this.allowInvalidClose=!1,this.enableWindowCascading=!0,this.menubarHeight=32,this.menubarTemplateUrl=void 0,this.showLaunchMenu=!1}var b={createDesktop:function(){var a=new c;return a}},c=function(){this.options=new a};return b}),a.controller("mdiDesktopController",["$rootScope","$scope","$window","desktopClassFactory",function(a,b,c,d){function e(a){return window.event&&a.preventDefault(),!0}var f=this;f.allMinimized=!1,f.desktop=d.createDesktop(),f.options=void 0,f.minWindowCascadePosition=40,f.maxWindowCascadePosition=100,f.lastWindowCascadePosition={top:f.minWindowCascadePosition,left:f.minWindowCascadePosition},f.options=angular.extend(f.desktop.options,b.mdiDesktop),f.getOptions=function(){return b.options},f.getWindows=function(){return b.windows},f.getNextMaxZIndex=function(){for(var a,c=0,d=b.windows.length-1;d>=0;d--)a=b.windows[d].zIndex,a>c&&(c=a);return++c},f.clearActive=function(){angular.forEach(b.windows,function(a){a.active=!1})},f.hideShowAll=function(){f.allMinimized=!f.allMinimized,angular.forEach(b.windows,function(a){a.active=!1,a.minimized=f.allMinimized})},f.openWindow=function(c){f.clearActive();var d=Object.create(f.windowConfig);d.zIndex=f.getNextMaxZIndex(),d.globals=angular.extend({},a.$eval(b.options.globals));var e=angular.extend(d,c);b.windows.push(e)},f.closeWindow=function(a){return!f.options.allowDirtyClose&&a.isDirty?void alert("Unsaved Changes. Save changes before closing window."):!f.options.allowInvalidClose&&a.isInvalid?void alert("Data is invalid. Correct Invalid data before closing window."):void b.windows.splice(b.windows.indexOf(a),1)},f.cascadeWindow=function(a){b.options.enableWindowCascading&&(f.lastWindowCascadePosition.top+=10,f.lastWindowCascadePosition.left+=10,f.lastWindowCascadePosition.top>f.maxWindowCascadePosition&&(f.lastWindowCascadePosition.top=f.minWindowCascadePosition),f.lastWindowCascadePosition.left>f.maxWindowCascadePosition&&(f.lastWindowCascadePosition.left=f.minWindowCascadePosition),a.top=f.lastWindowCascadePosition.top+"px",a.left=f.lastWindowCascadePosition.left+"px")},document.onselectstart=e,b.options=f.options,b.options.viewportTop=void 0!==b.options.menubarTemplateUrl?b.options.menubarHeight:0,b.windows=[],f.windowConfig={title:"",active:!0,globals:void 0,minimized:!1,maximized:!1,outOfBounds:!1,split:!1,top:0,left:0,right:"auto",bottom:"auto",height:"400px",width:"400px",minHeight:"200px",minWidth:"200px",zIndex:-1,isDirty:!1,isInvalid:!1,views:[{active:!0,entities:void 0,entityIndex:0,isDirty:!1,isInvalid:!1,viewDirective:void 0}]}}]),a.directive("mdiDesktop",["$compile",function(){return{restrict:"A",templateUrl:"src/templates/mdi-desktop.html",scope:{mdiDesktop:"="},replace:!0,controller:"mdiDesktopController"}}])}(),function(){"use strict";var a=angular.module("mdi.resizable",[]);a.controller("mdiResizableController",["$scope",function(){}]),a.directive("mdiResizable",["$document",function(a){return{restrict:"A",replace:!1,scope:{window:"=",maximized:"=",direction:"@"},link:function(b,c){var d,e,f,g,h,i,j,k,l=0,m=0,n=0,o=0;c.bind("mousedown",function(c){b.maximized||(c.preventDefault(),m=c.clientY,l=c.clientX,a.on("mousemove",p),a.on("mouseup",q))});var p=function(a){b.$apply(function(){var c=a.pageY-m,p=a.pageX-l,q=c-o,r=p-n;o=c,n=p,d=parseInt(b.window.height,10),e=parseInt(b.window.width,10),f=parseInt(b.window.top,10),g=parseInt(b.window.left,10),h=parseInt(b.window.right,10),i=parseInt(b.window.bottom,10),j=parseInt(b.window.minHeight,10),k=parseInt(b.window.minWidth,10),b.direction.indexOf("w")>-1&&(k>e-r&&(l-=r-(r=e-k)),b.window.left=g+r+"px",b.window.width=e-r+"px"),b.direction.indexOf("n")>-1&&(j>d-q&&(m-=q-(q=d-j)),0>f+q&&(m-=q-(q=0-f)),b.window.top=f+q+"px",b.window.height=d-q+"px"),b.direction.indexOf("e")>-1&&(k>e+r&&(l-=r-(r=k-e)),b.window.width=e+r+"px"),b.direction.indexOf("s")>-1&&(j>d+q&&(m-=q-(q=j-d)),b.window.height=d+q+"px")})},q=function(){l=0,m=0,n=0,o=0,a.unbind("mousemove",p),a.unbind("mouseup",q)}}}}])}(),angular.module("mdi.desktop").run(["$templateCache",function(a){"use strict";a.put("src/templates/mdi-desktop-taskbar.html",'<div class="desktop-taskbar-container">\r\n    <div class="desktop-taskbar-launch-menu" data-ng-if="options.showLaunchMenu">\r\n        <div class="desktop-taskbar-launch-button">\r\n            <span class="desktop-icon-windows8"></span>\r\n        </div>\r\n    </div>\r\n    <div class="desktop-taskbar-list" data-ng-class="{\'desktop-taskbar-list-offset\': options.showLaunchMenu}">\r\n        <ul>\r\n            <li class="am-fade-and-scale desktop-text"\r\n                data-ng-repeat="window in windows"\r\n                data-ng-class="{\'desktop-active-taskbar-list-item\': window.active, \'desktop-taskbar-list-item-recover\': window.outOfBounds}"\r\n                data-ng-click="updateWindowState(window)">\r\n                <div class="desktop-relative">\r\n                    <div class="desktop-taskbar-list-item-title">\r\n                        <span data-ng-show="!window.outOfBounds">{{window.title}}</span>\r\n                    </div>\r\n                    <i class="desktop-icon-close desktop-taskbar-list-item-close" data-ng-click="close($event, $index)"></i>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="desktop-taskbar-hide">\r\n        <div class="desktop-taskbar-hide-button" data-ng-click="hideShowAll()">\r\n\r\n        </div>\r\n    </div>\r\n</div>'),a.put("src/templates/mdi-desktop-viewport.html",'<div class="desktop-viewport-container" data-ng-style="{\'top\': options.viewportTop + \'px\'}" data-ng-mousedown="viewportMouseDown($event)">\r\n    <span class="desktop-viewport-dimensions desktop-text">{{dimensions.height}} x {{dimensions.width}}</span>\r\n    <div data-ng-repeat="window in windows" class="am-fade-and-scale">\r\n        <div data-mdi-desktop-window data-index="$index" data-window="window"></div>\r\n    </div>\r\n    <div class="desktop-viewport-left-split-outline" data-ng-show="showLeftOutline"></div>\r\n    <div class="desktop-viewport-right-split-outline" data-ng-show="showRightOutline"></div>\r\n</div>'),a.put("src/templates/mdi-desktop-window.html","<div class=\"desktop-window-container\"\r\n     data-ng-class=\"{'desktop-window-active': window.active, 'desktop-window-maximized': window.maximized || window.split}\"\r\n     data-ng-style=\"{'z-index': window.zIndex, 'top': window.top, 'left': window.left, 'right': window.right, 'bottom': window.bottom, 'height': window.height, 'width': window.width, 'min-height': window.minHeight, 'minWidth': window.minWidth}\"\r\n     data-ng-mousedown=\"activate($event)\"\r\n     data-ng-hide=\"window.minimized\">\r\n    <div class=\"desktop-window-header\" data-ng-class=\"{'desktop-window-maximized': window.maximized || window.split}\">\r\n        <div class=\"desktop-window-navigation\">\r\n            <div class=\"desktop-btn-group desktop-btn-group-xs desktop-window-navigation-button-group\">\r\n"+'                <button type="button" class="desktop-btn desktop-btn-default" title="previous" tabindex="-1" data-ng-disabled="disablePrevious" data-ng-click="previousView()">\r\n                    <span class="desktop-icon-arrow-left2"></span>\r\n                </button>\r\n                <button type="button" class="desktop-btn desktop-btn-default" title="next" tabindex="-1" data-ng-disabled="disableNext" data-ng-click="nextView()">\r\n                    <span class="desktop-icon-arrow-right2"></span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class="desktop-window-title" data-ng-dblclick="maximize()" data-ng-mousedown="windowTitleMouseDown($event)">\r\n            <div class="desktop-window-title-container">\r\n                <div class="desktop-text">{{window.title}}</div>\r\n            </div>\r\n        </div>\r\n        <div class="desktop-window-action">\r\n            <div class="desktop-btn-group desktop-btn-group-xs desktop-window-navigation-button-group">\r\n                <button type="button" class="desktop-btn desktop-btn-default minimize" title="Minimize" data-ng-click="minimize()" tabindex="-1">\r\n                    <span class="desktop-icon-minus"></span>\r\n                </button>\r\n                <button type="button" class="desktop-btn desktop-btn-default maximize" title="" data-ng-click="maximize()" tabindex="-1">\r\n                    <span data-ng-class="{\'desktop-icon-expand\': !window.maximized, \'desktop-icon-contract\': window.maximized}"></span>\r\n                </button>\r\n                <button type="button" class="desktop-btn desktop-btn-default" data-ng-class="{\'desktop-window-close-button\': window.active}" title="Close" data-ng-click="close()" tabindex="-1">\r\n                    <span class="desktop-icon-close"></span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <fieldset data-ng-disabled="!window.active" class="desktop-window-fieldset">\r\n        <div class="desktop-window-content">\r\n            <div data-ng-repeat="view in window.views">\r\n                <div data-mdi-desktop-view view="view" data-ng-show="view.active"></div>\r\n            </div>\r\n        </div>\r\n    </fieldset>\r\n    <div class="desktop-window-statusbar" data-ng-class="{\'desktop-window-maximized\': window.maximized || window.split}">\r\n        <div class="desktop-window-statusbar-container">\r\n            <span class="desktop-icon-info" data-ng-class="{\'is-dirty-icn\': window.isDirty, \'desktop-display-none\': !window.isDirty}"></span>\r\n            <span class="desktop-icon-spam" data-ng-class="{\'is-invalid-icn\': window.isInvalid, \'desktop-display-none\': !window.isInvalid}"></span>\r\n        </div>\r\n    </div>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-nw" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="nw"></span>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-ne" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="ne"></span>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-sw" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="sw"></span>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-se" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="se"></span>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-n" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="n"></span>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-s" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="s"></span>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-w" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="w"></span>\r\n    <span class="desktop-window-resizable-handle desktop-window-resizable-e" data-mdi-resizable data-window="window" data-maximized="maximized" data-direction="e"></span>\r\n</div>'),a.put("src/templates/mdi-desktop.html",'<div class="desktop-wrapper">\r\n    <style>\r\n\r\n    </style>\r\n\r\n    <div class="desktop-menubar-container" data-ng-style="{\'height\': options.menubarHeight + \'px\'}">\r\n        <div data-mdi-desktop-menubar windows="windows" data-template-url="{{options.menubarTemplateUrl}}" data-ng-if="options.menubarTemplateUrl != undefined"></div>\r\n    </div>\r\n\r\n    <div data-mdi-desktop-viewport windows="windows"></div>\r\n\r\n    <div data-mdi-desktop-taskbar windows="windows"></div>\r\n</div>')}]);